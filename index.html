<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <title>Santuario Digital</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- A-Frame 1.5.0 -->
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

    <!-- Componentes custom -->
    <script type="module" src="./js/Main.js"></script>
    <script src="./js/controls/desktopControl.js"></script>
    <script src="./js/controls/mobileControl.js"></script>
    <script src="./js/controls/fly-mode.js"></script>
    <script src="./js/components/handleClick.js"></script>
    <script src="./js/components/mirrormaterial.js"></script>
    <script src="./js/components/DetectorClickHover.js"></script>
    <script src="./js/components/Embellecedor.js"></script>
</head>

<body>
    <a-scene vr-mode-ui="enabled: false" cursor="rayOrigin: mouse" fly-mode>
        <!-- Fondo -->
        <a-sky src="./assets/environment.png" rotation="0 145 0"></a-sky>

        <!-- Luz principal -->
        <a-entity light="type: directional; intensity: 1" position="1 2 1"></a-entity>
        <a-entity light="type: ambient; intensity: 0.3"></a-entity>

        <!-- RIG que agrupa movimiento + cámara -->
        <a-entity id="rig" position="0 0 0" check-player touch-hold
            scroll-fly-smooth="speed:0.02; step:0.25; minY:-10; maxY:10">
            <!-- Cámara con todos tus controles -->
            <a-entity id="camera" camera look-controls arrow-fly-smooth="step:0.005; speed:0.15" swipe-up-down
                swipe-left-right raycaster="objects: [data-raycastable]" clickable position="0 0.25 0">
            </a-entity>
        </a-entity>

        <!-- GLB cargado como escenario estático -->
        <a-entity id="escenario" gltf-model="./assets/escenario.glb" mirror-material="target: #escenario"
            check-door></a-entity>

        <!-- HUD o UI principal, pegada al visor -->
        <a-entity id="hud" hud-overlay="camera: #camera" scale="1 1 1">
            <!-- Plano de depuración para ver el HUD padre -->
            <a-plane hud-autoscale width="0.15" height="0.1" color="transparent" opacity="0.2" position="0 0 0" material="shader: flat; side: double; fog: false; depthTest: false; toneMapped: false;">
            </a-plane>

            <!-- Indicador: FlightMode / Wings -->
            <a-entity id="hud-wings" hud-autoscale hud-relative position="-0.06 -0.04 0">
                <a-plane src="./assets/Wings-HUD.svg" width="0.02" height="0.01" transparent="true"
                    material="shader: flat; side: double; fog: false; depthTest: false; toneMapped: false;">
                </a-plane>

                <a-text id="hud-wings-text" value="OFF" color="white" align="center" width="0.09">
                </a-text>
            </a-entity>

            <!-- Aquí se podrán añadir otros indicadores del HUD -->
        </a-entity>

    </a-scene>
</body>

</html>